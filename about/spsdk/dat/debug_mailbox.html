<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>spsdk.dat.debug_mailbox API documentation</title>
<meta name="description" content="Module for DebugMailbox." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>spsdk.dat.debug_mailbox</code></h1>
</header>
<section id="section-intro">
<p>Module for DebugMailbox.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#!/usr/bin/env python
# -*- coding: UTF-8 -*-
#
# Copyright 2019-2020 NXP
#
# SPDX-License-Identifier: BSD-3-Clause
&#34;&#34;&#34;Module for DebugMailbox.&#34;&#34;&#34;
import logging
import sys

from time import sleep
from typing import Any, Tuple

import prettytable
import colorama

from munch import munchify
from pyocd.core.helpers import ConnectHelper
from pyocd.utility.sequencer import CallSequence
from pyocd.coresight.discovery import ADIVersion, ADIv5Discovery, ADIv6Discovery

from spsdk.debuggers import JLinkWrapper, RedLinkWrapper
from spsdk.debuggers import pemicroProbeWrapper, pemicroUnitAcmp

# logging.basicConfig(level=logging.DEBUG)
logging.getLogger(&#39;pyocd.board.board&#39;).setLevel(logging.CRITICAL)
logging.getLogger(&#39;pyocd.core.coresight_target&#39;).setLevel(logging.CRITICAL)
logging.getLogger(&#39;pyocd.probe.common&#39;).setLevel(logging.CRITICAL)

logger = logging.getLogger(__name__)


class DebugMailboxError(RuntimeError):
    &#34;&#34;&#34;Class for DebugMailboxError.&#34;&#34;&#34;
    pass


class DebugProbes(list):
    &#34;&#34;&#34;Helper class for debug probe selection.&#34;&#34;&#34;

    def append_pyocd_probes(self, probes: list) -&gt; None:
        &#34;&#34;&#34;Add PyOCD-based probes.&#34;&#34;&#34;
        if probes != None:
            for probe in probes:
                self.append({&#34;Interface&#34;:&#34;PyOCD&#34;, &#34;Id&#34;:probe.unique_id, &#34;Description&#34;:probe.description})

    def append_pemicro_probes(self, probes: list) -&gt; None:
        &#34;&#34;&#34;Add P&amp;E Micro-based probes.&#34;&#34;&#34;
        if probes != None:
            for probe in probes:
                self.append({&#34;Interface&#34;:&#34;PEMICRO&#34;, &#34;Id&#34;:probe[&#34;id&#34;], &#34;Description&#34;:probe[&#34;description&#34;]})

    def select_probe(self, probes_list: list) -&gt; Tuple[str, str]:
        &#34;&#34;&#34;Perform Probe selection.&#34;&#34;&#34;
        colorama.init()

        # Print all PyOCD probes and then Pemicro with local index
        table = prettytable.PrettyTable([&#34;#&#34;, &#34;Interface&#34;, &#34;Id&#34;, &#34;Description&#34;])
        table.align = &#39;l&#39;
        table.header = True
        table.border = True
        table.hrules = prettytable.HEADER
        table.vrules = prettytable.NONE
        i = 0
        i_selected = i
        if probes_list != None:
            for probe in probes_list:
                table.add_row([
                    colorama.Fore.YELLOW + str(i),
                    colorama.Fore.WHITE + probe[&#34;Interface&#34;],
                    colorama.Fore.CYAN + probe[&#34;Id&#34;],
                    colorama.Fore.GREEN + probe[&#34;Description&#34;],
                    ])
                i += 1

        if i == 0:
            print(&#34;There is no any debug probe connected in system!&#34;)
            raise IOError(&#34;There is no any debug probe connected in system!&#34;)

        print(table)
        print(colorama.Style.RESET_ALL, end=&#39;&#39;)

        if i == 1:
            # Automatically gets and use only one option\
            i_selected = 0
        else:
            print(&#34;Please choose the debug probe: &#34;, end=&#39;&#39;)
            i_selected = int(input())
            if i_selected &gt; i-1:
                print(&#34;The choosen probe index is out of range&#34;)
                raise IOError(&#34;The choosen probe index is out of range&#34;)

        row = table[i_selected]
        row.border = False
        row.header = False
        debug_interface = row.get_string(fields=[&#34;Interface&#34;]).strip().replace(colorama.Fore.WHITE, &#34;&#34;).lower()
        hardware_id = row.get_string(fields=[&#34;Id&#34;]).strip().replace(colorama.Fore.CYAN, &#34;&#34;).lower()

        return debug_interface, hardware_id


class DebugMailbox:
    &#34;&#34;&#34;Class for DebugMailbox.&#34;&#34;&#34;
    def __init__(self, debug_interface: str, apnumber: int = 2,
                 reset: bool = True, moredelay: float = 1.0,
                 serial_no: int = None, ip_addr: str = None,
                 tool: str = None, hardware_id: str = None) -&gt; None:
        &#34;&#34;&#34;Initialize DebugMailbox object.&#34;&#34;&#34;
        # setup debug port / access point
        # self.args = args
        self.debug_interface = debug_interface
        self.tool = tool
        self.serial_no = serial_no
        self.ip_addr = ip_addr
        self.hardware_id = hardware_id
        self.reset = reset
        self.moredelay = moredelay
        # setup registers and register bitfields
        self.registers = REGISTERS

        debug_probes = DebugProbes()

        # if self.debug_interface == None:
        #     # There is no selected debug interface - gather all possible connected Debug interfaces
        #     try:
        #         pyocdProbes = ConnectHelper.get_all_connected_probes(blocking=False)
        #     except:
        #         pyocdProbes = None
        #     try:
        #         pemicroProbes = pemicroUnitAcmp().listPorts()
        #     except:
        #         pemicroProbes = None    #type: ignore

        #     debug_probes.append_pyocd_probes(pyocdProbes)
        #     debug_probes.append_pemicro_probes(pemicroProbes)

        #     try:
        #         self.debug_interface, self.hardware_id = debug_probes.select_probe(debug_probes)
        #     except IOError as e:
        #         print(&#34;Cannot select the debug probe. Error:{err}&#34;.format(err=str(e)))
        #         sys.exit(-1)

        if self.debug_interface == &#39;pyocd&#39;:
            # ---------------------------------------------------------------
            # pyocd 0.27.0
            # ---------------------------------------------------------------
            if self.hardware_id == None:
                try:
                    pyocdProbes = ConnectHelper.get_all_connected_probes(blocking=False)
                    debug_probes.append_pyocd_probes(pyocdProbes)
                    self.debug_interface, self.hardware_id = debug_probes.select_probe(debug_probes)
                except IOError as e:
                    print(&#34;Cannot select the debug probe. Error:{err}&#34;.format(err=str(e)))
                    sys.exit(-1)

            self.session = ConnectHelper.session_with_chosen_probe(
                # blocking=False, return_first=False, unique_id=None,
                blocking=False, return_first=False, unique_id=self.hardware_id,
                did_show_no_libusb_warning=True, allow_no_cores=True
            )
            if self.session is None:
                raise ValueError(&#34;No probe available!&#34;)
            self.session.delegate = self
            self.session.options.set(&#34;probe_all_aps&#34;, True)
            self.session.open()
            self.board = self.session.board
            self.target = self.session.target
            logger.info(&#34;PyOCD connected via {0} probe.&#34;.format(self.session.probe.product_name))
            self.di = self.get_dmbox_ap(self.target.aps)
            if self.di is None:
                raise ValueError(&#34;No debug mail box access point available!&#34;)

            self.target.dp.init()
            self.target.dp.power_up_debug()
        elif self.debug_interface == &#39;redlink&#39;:
            self.di = RedLinkWrapper(apnumber, self.tool)
        elif self.debug_interface == &#39;jlink&#39;:
            self.di = JLinkWrapper(apnumber, self.serial_no, self.ip_addr)
        elif self.debug_interface == &#39;pemicro&#39;:
            if self.hardware_id is None:
                try:
                    pemicroProbes = pemicroUnitAcmp().listPorts()
                    debug_probes.append_pemicro_probes(pemicroProbes)
                    self.debug_interface, self.hardware_id = debug_probes.select_probe(debug_probes)
                except IOError as e:
                    print(&#34;Cannot select the debug probe. Error:{err}&#34;.format(err=str(e)))
                    sys.exit(-1)

            self.di = pemicroProbeWrapper(apnumber, self.hardware_id)
            if not self.di.connectedToDebugHardware:
                print(&#39;Error ... Unable to connect to PEMicro HW.&#39;)
                print(&#39;Specify with --pemicroid ID or list with --pemicroid listids&#39;)
                sys.exit(1)
            else:
                print(&#39;Connecting to debug hardware ... ok.&#39;)
            if not self.di.connectedToTarget:
                print(&#39;Error ... Unable to establish communications with target via SWD.&#39;)
                print(&#39;Check target power/connections.&#39;)
                self.close()
                sys.exit(1)
            else:
                print(&#39;Establishing communications to target via SWD ... ok.&#39;)
        else:
            raise ValueError(&#34;Bad interface specified!&#34;)

        # From now on, we can use self.di.read_reg(ADDR)
        # or self.di.write_reg(ADDR, VALUE) to read and
        # write to registers



        # Now, proceed with initiation (Resynchronisation request)

        # The communication to the DM is initiated by the debugger.
        # It does so by writing the RESYNCH_REQ bit of the CSW (Control and Status Word)
        # register to 1. It then needs to reset the chip so that ROM code can observe
        # this request.
        # In order to reset the chip, the debugger can either pull the
        # reset line of the chip, or set the CHIP_RESET_REQ (This can be done at the
        # same time as setting the RESYNCH_REQ bit).

        logger.debug(f&#34;No reset mode: {self.reset!r}&#34;)
        if self.reset:
            self.di.write_reg(
                self.registers.CSW.address,
                self.registers.CSW.bits.RESYNCH_REQ |
                self.registers.CSW.bits.CHIP_RESET_REQ
            )

        # Acknowledgement of initiation

        # After performing the initiation, the debugger must readback the CSW register.
        # The DM will stall the debugger until the ROM code has serviced the resynchronization request.
        # The ROM does this by performing a soft reset of the DM block, thus resetting
        # the request bit/s which were set by the debugger.
        # Therefore, the debugger must read back 0x0 in CSW to know that the initiation
        # request has been serviced.

        if self.moredelay &gt; 0.001:
            sleep(self.moredelay)
        if self.debug_interface == &#39;pyocd&#39;:
            ret = None
            retries = 20
            while ret is None:
                try:
                    ret = self.di.read_reg(self.registers.CSW.address)
                except Exception as e:
                    retries -= 1
                    if retries == 0:
                        retries = 20
                        raise IOError(&#34;TransferTimeoutError limit exceeded!&#34;)
                    # if isinstance(e, TransferTimeoutError):
                    sleep(0.05)

        else:
            while self.di.read_reg(self.registers.CSW.address, requiresDelay=True) != 0:
                sleep(0.01)


    def get_dmbox_ap(self, aps: Any) -&gt; Any:
        &#34;&#34;&#34;Search for Debug Mailbox Access Point.&#34;&#34;&#34;
        for ap in aps.values():
            if ap.idr == self.registers.IDR.expected:
                logger.debug(&#34;Found debug mailbox %s&#34; % ap.short_description)
                return ap

        return None

    def will_init_target(self, target: Any, init_sequence: &#39;CallSequence&#39;) -&gt; None:
        &#34;&#34;&#34;Initialize target.&#34;&#34;&#34;
        # modify the (coresight_target.py) mutable call sequence
        init_sequence.remove_task(&#39;load_svd&#39;)
        init_sequence.remove_task(&#39;create_flash&#39;)
        init_sequence.replace_task(&#39;create_discoverer&#39;, self._create_discoverer)
        init_sequence.remove_task(&#39;check_for_cores&#39;)

    def _create_discoverer(self) -&gt; None:
        &#34;&#34;&#34;Init task to create the discovery object.

        Instantiates the appropriate @ref pyocd.coresight.discovery.CoreSightDiscovery
        CoreSightDiscovery subclass for the target&#39;s ADI version.
        &#34;&#34;&#34;
        target = self.session.target
        target._discoverer = DMBOX_ADI_DISCOVERY_CLASS_MAP[target.dp.adi_version](target)

    def _override_ap_list(self) -&gt; None:
        &#34;&#34;&#34;Override ap list.&#34;&#34;&#34;
        self.session.target.dp.valid_aps = [2]

    def close(self) -&gt; None:
        &#34;&#34;&#34;Close session.&#34;&#34;&#34;
        if self.debug_interface == &#39;pyocd&#39;:
            self.session.close()
        else:
            self.di.close()

    def spin_read(self, reg: int, now: bool = True) -&gt; int:
        &#34;&#34;&#34;Read.&#34;&#34;&#34;
        ret = None
        while ret is None:
            try:
                ret = self.di.read_reg(reg, now)
            except Exception as e:
                logger.error(str(e))
                logger.error(f&#34;read exception  {reg:#08X}&#34;)
                sleep(0.01)
        return ret

    def spin_write(self, reg: int, value: int) -&gt; None:
        &#34;&#34;&#34;Write.&#34;&#34;&#34;
        while True:
            try:
                self.di.write_reg(reg, value)
                # wait for rom code to read the data
                while True:
                    ret = self.di.read_reg(self.registers.CSW.address)
                    if (ret &amp; self.registers.CSW.bits.REQ_PENDING) == 0:
                        break

                return
            except Exception as e:
                logger.error(str(e))
                logger.error(f&#34;write exception addr={reg:#08X}, val={value:#08X}&#34;)
                sleep(0.01)


class dmboxADIv5Discovery(ADIv5Discovery):
    &#34;&#34;&#34;Custom discoverer class based of ADIv5Discovery.&#34;&#34;&#34;
    def __init__(self, target: Any) -&gt; None:
        &#34;&#34;&#34;! @brief Constructor.&#34;&#34;&#34;
        super(dmboxADIv5Discovery, self).__init__(target)

    def discover(self) -&gt; CallSequence:
        &#34;&#34;&#34;Setup list of calls to perform the components discovery.&#34;&#34;&#34;
        #pylint: disable=bad-whitespace
        return CallSequence(
            (&#39;find_aps&#39;,            self._find_aps),
            (&#39;create_aps&#39;,          self._create_aps),
            (&#39;find_components&#39;,     self._find_components),
            (&#39;create_cores&#39;,            self._create_cores)
        )

    def _find_components(self) -&gt; None:
        return None

    def _create_cores(self) -&gt; None:
        return None


class dmboxADIv6Discovery(ADIv6Discovery):
    &#34;&#34;&#34;Custom discoverer class based of ADIv6Discovery.&#34;&#34;&#34;

    def __init__(self, target: Any) -&gt; None:
        &#34;&#34;&#34;! @brief Constructor.&#34;&#34;&#34;
        super(dmboxADIv6Discovery, self).__init__(target)

    def discover(self) -&gt; CallSequence:
        &#34;&#34;&#34;Setup list of calls to perform the components discovery.&#34;&#34;&#34;
        return CallSequence(
            (&#39;find_root_components&#39;, self._find_root_components),
        )


## Map from ADI version to the discovery class.
DMBOX_ADI_DISCOVERY_CLASS_MAP = {
    ADIVersion.ADIv5: dmboxADIv5Discovery,
    ADIVersion.ADIv6: dmboxADIv6Discovery,
}


REGISTERS = munchify({
    # Control and Status Word (CSW) is used to control
    # the Debug Mailbox communication
    &#39;CSW&#39;: {
        &#39;address&#39;: 0x00,
        &#39;bits&#39;: {

            # Debugger will set this bit to 1 to request a resynchronrisation
            &#39;RESYNCH_REQ&#39;: (1 &lt;&lt; 0),

            # Request is pending from debugger (i.e unread value in REQUEST)
            &#39;REQ_PENDING&#39;: (1 &lt;&lt; 1),

            # Debugger overrun error
            # (previous REQUEST overwritten before being picked up by ROM)
            &#39;DBG_OR_ERR&#39;: (1 &lt;&lt; 2),

            # AHB overrun Error (Return value overwritten by ROM)
            &#39;AHB_OR_ERR&#39;: (1 &lt;&lt; 3),

            # Soft Reset for DM (write-only from AHB,
            # not readable and self-clearing).
            # A write to this bit will cause a soft reset for DM.
            &#39;SOFT_RESET&#39;: (1 &lt;&lt; 4),

            # Write only bit. Once written will cause the chip to reset
            # (note that the DM is not reset by this reset as it is
            #   only resettable by a SOFT reset or a POR/BOD event)
            &#39;CHIP_RESET_REQ&#39;: (1 &lt;&lt; 5),
        }
    },

    # Request register is used to send data from debugger to device
    &#39;REQUEST&#39;: {
        &#39;address&#39;: 0x04,
    },

    # Return register is used to send data from device to debugger
    # Note: Any read from debugger side will be stalled until new data is present.
    &#39;RETURN&#39;: {
        &#39;address&#39;: 0x08,
    },

    # IDR register is used to identify the access port
    &#39;IDR&#39;: {
        &#39;address&#39;: 0xFC,
        &#39;expected&#39;: 0x002A0000,
    }
})</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="spsdk.dat.debug_mailbox.DebugMailbox"><code class="flex name class">
<span>class <span class="ident">DebugMailbox</span></span>
<span>(</span><span>debug_interface: str, apnumber: int = 2, reset: bool = True, moredelay: float = 1.0, serial_no: int = None, ip_addr: str = None, tool: str = None, hardware_id: str = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Class for DebugMailbox.</p>
<p>Initialize DebugMailbox object.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DebugMailbox:
    &#34;&#34;&#34;Class for DebugMailbox.&#34;&#34;&#34;
    def __init__(self, debug_interface: str, apnumber: int = 2,
                 reset: bool = True, moredelay: float = 1.0,
                 serial_no: int = None, ip_addr: str = None,
                 tool: str = None, hardware_id: str = None) -&gt; None:
        &#34;&#34;&#34;Initialize DebugMailbox object.&#34;&#34;&#34;
        # setup debug port / access point
        # self.args = args
        self.debug_interface = debug_interface
        self.tool = tool
        self.serial_no = serial_no
        self.ip_addr = ip_addr
        self.hardware_id = hardware_id
        self.reset = reset
        self.moredelay = moredelay
        # setup registers and register bitfields
        self.registers = REGISTERS

        debug_probes = DebugProbes()

        # if self.debug_interface == None:
        #     # There is no selected debug interface - gather all possible connected Debug interfaces
        #     try:
        #         pyocdProbes = ConnectHelper.get_all_connected_probes(blocking=False)
        #     except:
        #         pyocdProbes = None
        #     try:
        #         pemicroProbes = pemicroUnitAcmp().listPorts()
        #     except:
        #         pemicroProbes = None    #type: ignore

        #     debug_probes.append_pyocd_probes(pyocdProbes)
        #     debug_probes.append_pemicro_probes(pemicroProbes)

        #     try:
        #         self.debug_interface, self.hardware_id = debug_probes.select_probe(debug_probes)
        #     except IOError as e:
        #         print(&#34;Cannot select the debug probe. Error:{err}&#34;.format(err=str(e)))
        #         sys.exit(-1)

        if self.debug_interface == &#39;pyocd&#39;:
            # ---------------------------------------------------------------
            # pyocd 0.27.0
            # ---------------------------------------------------------------
            if self.hardware_id == None:
                try:
                    pyocdProbes = ConnectHelper.get_all_connected_probes(blocking=False)
                    debug_probes.append_pyocd_probes(pyocdProbes)
                    self.debug_interface, self.hardware_id = debug_probes.select_probe(debug_probes)
                except IOError as e:
                    print(&#34;Cannot select the debug probe. Error:{err}&#34;.format(err=str(e)))
                    sys.exit(-1)

            self.session = ConnectHelper.session_with_chosen_probe(
                # blocking=False, return_first=False, unique_id=None,
                blocking=False, return_first=False, unique_id=self.hardware_id,
                did_show_no_libusb_warning=True, allow_no_cores=True
            )
            if self.session is None:
                raise ValueError(&#34;No probe available!&#34;)
            self.session.delegate = self
            self.session.options.set(&#34;probe_all_aps&#34;, True)
            self.session.open()
            self.board = self.session.board
            self.target = self.session.target
            logger.info(&#34;PyOCD connected via {0} probe.&#34;.format(self.session.probe.product_name))
            self.di = self.get_dmbox_ap(self.target.aps)
            if self.di is None:
                raise ValueError(&#34;No debug mail box access point available!&#34;)

            self.target.dp.init()
            self.target.dp.power_up_debug()
        elif self.debug_interface == &#39;redlink&#39;:
            self.di = RedLinkWrapper(apnumber, self.tool)
        elif self.debug_interface == &#39;jlink&#39;:
            self.di = JLinkWrapper(apnumber, self.serial_no, self.ip_addr)
        elif self.debug_interface == &#39;pemicro&#39;:
            if self.hardware_id is None:
                try:
                    pemicroProbes = pemicroUnitAcmp().listPorts()
                    debug_probes.append_pemicro_probes(pemicroProbes)
                    self.debug_interface, self.hardware_id = debug_probes.select_probe(debug_probes)
                except IOError as e:
                    print(&#34;Cannot select the debug probe. Error:{err}&#34;.format(err=str(e)))
                    sys.exit(-1)

            self.di = pemicroProbeWrapper(apnumber, self.hardware_id)
            if not self.di.connectedToDebugHardware:
                print(&#39;Error ... Unable to connect to PEMicro HW.&#39;)
                print(&#39;Specify with --pemicroid ID or list with --pemicroid listids&#39;)
                sys.exit(1)
            else:
                print(&#39;Connecting to debug hardware ... ok.&#39;)
            if not self.di.connectedToTarget:
                print(&#39;Error ... Unable to establish communications with target via SWD.&#39;)
                print(&#39;Check target power/connections.&#39;)
                self.close()
                sys.exit(1)
            else:
                print(&#39;Establishing communications to target via SWD ... ok.&#39;)
        else:
            raise ValueError(&#34;Bad interface specified!&#34;)

        # From now on, we can use self.di.read_reg(ADDR)
        # or self.di.write_reg(ADDR, VALUE) to read and
        # write to registers



        # Now, proceed with initiation (Resynchronisation request)

        # The communication to the DM is initiated by the debugger.
        # It does so by writing the RESYNCH_REQ bit of the CSW (Control and Status Word)
        # register to 1. It then needs to reset the chip so that ROM code can observe
        # this request.
        # In order to reset the chip, the debugger can either pull the
        # reset line of the chip, or set the CHIP_RESET_REQ (This can be done at the
        # same time as setting the RESYNCH_REQ bit).

        logger.debug(f&#34;No reset mode: {self.reset!r}&#34;)
        if self.reset:
            self.di.write_reg(
                self.registers.CSW.address,
                self.registers.CSW.bits.RESYNCH_REQ |
                self.registers.CSW.bits.CHIP_RESET_REQ
            )

        # Acknowledgement of initiation

        # After performing the initiation, the debugger must readback the CSW register.
        # The DM will stall the debugger until the ROM code has serviced the resynchronization request.
        # The ROM does this by performing a soft reset of the DM block, thus resetting
        # the request bit/s which were set by the debugger.
        # Therefore, the debugger must read back 0x0 in CSW to know that the initiation
        # request has been serviced.

        if self.moredelay &gt; 0.001:
            sleep(self.moredelay)
        if self.debug_interface == &#39;pyocd&#39;:
            ret = None
            retries = 20
            while ret is None:
                try:
                    ret = self.di.read_reg(self.registers.CSW.address)
                except Exception as e:
                    retries -= 1
                    if retries == 0:
                        retries = 20
                        raise IOError(&#34;TransferTimeoutError limit exceeded!&#34;)
                    # if isinstance(e, TransferTimeoutError):
                    sleep(0.05)

        else:
            while self.di.read_reg(self.registers.CSW.address, requiresDelay=True) != 0:
                sleep(0.01)


    def get_dmbox_ap(self, aps: Any) -&gt; Any:
        &#34;&#34;&#34;Search for Debug Mailbox Access Point.&#34;&#34;&#34;
        for ap in aps.values():
            if ap.idr == self.registers.IDR.expected:
                logger.debug(&#34;Found debug mailbox %s&#34; % ap.short_description)
                return ap

        return None

    def will_init_target(self, target: Any, init_sequence: &#39;CallSequence&#39;) -&gt; None:
        &#34;&#34;&#34;Initialize target.&#34;&#34;&#34;
        # modify the (coresight_target.py) mutable call sequence
        init_sequence.remove_task(&#39;load_svd&#39;)
        init_sequence.remove_task(&#39;create_flash&#39;)
        init_sequence.replace_task(&#39;create_discoverer&#39;, self._create_discoverer)
        init_sequence.remove_task(&#39;check_for_cores&#39;)

    def _create_discoverer(self) -&gt; None:
        &#34;&#34;&#34;Init task to create the discovery object.

        Instantiates the appropriate @ref pyocd.coresight.discovery.CoreSightDiscovery
        CoreSightDiscovery subclass for the target&#39;s ADI version.
        &#34;&#34;&#34;
        target = self.session.target
        target._discoverer = DMBOX_ADI_DISCOVERY_CLASS_MAP[target.dp.adi_version](target)

    def _override_ap_list(self) -&gt; None:
        &#34;&#34;&#34;Override ap list.&#34;&#34;&#34;
        self.session.target.dp.valid_aps = [2]

    def close(self) -&gt; None:
        &#34;&#34;&#34;Close session.&#34;&#34;&#34;
        if self.debug_interface == &#39;pyocd&#39;:
            self.session.close()
        else:
            self.di.close()

    def spin_read(self, reg: int, now: bool = True) -&gt; int:
        &#34;&#34;&#34;Read.&#34;&#34;&#34;
        ret = None
        while ret is None:
            try:
                ret = self.di.read_reg(reg, now)
            except Exception as e:
                logger.error(str(e))
                logger.error(f&#34;read exception  {reg:#08X}&#34;)
                sleep(0.01)
        return ret

    def spin_write(self, reg: int, value: int) -&gt; None:
        &#34;&#34;&#34;Write.&#34;&#34;&#34;
        while True:
            try:
                self.di.write_reg(reg, value)
                # wait for rom code to read the data
                while True:
                    ret = self.di.read_reg(self.registers.CSW.address)
                    if (ret &amp; self.registers.CSW.bits.REQ_PENDING) == 0:
                        break

                return
            except Exception as e:
                logger.error(str(e))
                logger.error(f&#34;write exception addr={reg:#08X}, val={value:#08X}&#34;)
                sleep(0.01)</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="spsdk.dat.debug_mailbox.DebugMailbox.close"><code class="name flex">
<span>def <span class="ident">close</span></span>(<span>self) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"><p>Close session.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def close(self) -&gt; None:
    &#34;&#34;&#34;Close session.&#34;&#34;&#34;
    if self.debug_interface == &#39;pyocd&#39;:
        self.session.close()
    else:
        self.di.close()</code></pre>
</details>
</dd>
<dt id="spsdk.dat.debug_mailbox.DebugMailbox.get_dmbox_ap"><code class="name flex">
<span>def <span class="ident">get_dmbox_ap</span></span>(<span>self, aps: Any) ‑> Any</span>
</code></dt>
<dd>
<div class="desc"><p>Search for Debug Mailbox Access Point.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_dmbox_ap(self, aps: Any) -&gt; Any:
    &#34;&#34;&#34;Search for Debug Mailbox Access Point.&#34;&#34;&#34;
    for ap in aps.values():
        if ap.idr == self.registers.IDR.expected:
            logger.debug(&#34;Found debug mailbox %s&#34; % ap.short_description)
            return ap

    return None</code></pre>
</details>
</dd>
<dt id="spsdk.dat.debug_mailbox.DebugMailbox.spin_read"><code class="name flex">
<span>def <span class="ident">spin_read</span></span>(<span>self, reg: int, now: bool = True) ‑> int</span>
</code></dt>
<dd>
<div class="desc"><p>Read.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def spin_read(self, reg: int, now: bool = True) -&gt; int:
    &#34;&#34;&#34;Read.&#34;&#34;&#34;
    ret = None
    while ret is None:
        try:
            ret = self.di.read_reg(reg, now)
        except Exception as e:
            logger.error(str(e))
            logger.error(f&#34;read exception  {reg:#08X}&#34;)
            sleep(0.01)
    return ret</code></pre>
</details>
</dd>
<dt id="spsdk.dat.debug_mailbox.DebugMailbox.spin_write"><code class="name flex">
<span>def <span class="ident">spin_write</span></span>(<span>self, reg: int, value: int) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"><p>Write.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def spin_write(self, reg: int, value: int) -&gt; None:
    &#34;&#34;&#34;Write.&#34;&#34;&#34;
    while True:
        try:
            self.di.write_reg(reg, value)
            # wait for rom code to read the data
            while True:
                ret = self.di.read_reg(self.registers.CSW.address)
                if (ret &amp; self.registers.CSW.bits.REQ_PENDING) == 0:
                    break

            return
        except Exception as e:
            logger.error(str(e))
            logger.error(f&#34;write exception addr={reg:#08X}, val={value:#08X}&#34;)
            sleep(0.01)</code></pre>
</details>
</dd>
<dt id="spsdk.dat.debug_mailbox.DebugMailbox.will_init_target"><code class="name flex">
<span>def <span class="ident">will_init_target</span></span>(<span>self, target: Any, init_sequence: CallSequence) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"><p>Initialize target.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def will_init_target(self, target: Any, init_sequence: &#39;CallSequence&#39;) -&gt; None:
    &#34;&#34;&#34;Initialize target.&#34;&#34;&#34;
    # modify the (coresight_target.py) mutable call sequence
    init_sequence.remove_task(&#39;load_svd&#39;)
    init_sequence.remove_task(&#39;create_flash&#39;)
    init_sequence.replace_task(&#39;create_discoverer&#39;, self._create_discoverer)
    init_sequence.remove_task(&#39;check_for_cores&#39;)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="spsdk.dat.debug_mailbox.DebugMailboxError"><code class="flex name class">
<span>class <span class="ident">DebugMailboxError</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Class for DebugMailboxError.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DebugMailboxError(RuntimeError):
    &#34;&#34;&#34;Class for DebugMailboxError.&#34;&#34;&#34;
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.RuntimeError</li>
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="spsdk.dat.debug_mailbox.DebugProbes"><code class="flex name class">
<span>class <span class="ident">DebugProbes</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Helper class for debug probe selection.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DebugProbes(list):
    &#34;&#34;&#34;Helper class for debug probe selection.&#34;&#34;&#34;

    def append_pyocd_probes(self, probes: list) -&gt; None:
        &#34;&#34;&#34;Add PyOCD-based probes.&#34;&#34;&#34;
        if probes != None:
            for probe in probes:
                self.append({&#34;Interface&#34;:&#34;PyOCD&#34;, &#34;Id&#34;:probe.unique_id, &#34;Description&#34;:probe.description})

    def append_pemicro_probes(self, probes: list) -&gt; None:
        &#34;&#34;&#34;Add P&amp;E Micro-based probes.&#34;&#34;&#34;
        if probes != None:
            for probe in probes:
                self.append({&#34;Interface&#34;:&#34;PEMICRO&#34;, &#34;Id&#34;:probe[&#34;id&#34;], &#34;Description&#34;:probe[&#34;description&#34;]})

    def select_probe(self, probes_list: list) -&gt; Tuple[str, str]:
        &#34;&#34;&#34;Perform Probe selection.&#34;&#34;&#34;
        colorama.init()

        # Print all PyOCD probes and then Pemicro with local index
        table = prettytable.PrettyTable([&#34;#&#34;, &#34;Interface&#34;, &#34;Id&#34;, &#34;Description&#34;])
        table.align = &#39;l&#39;
        table.header = True
        table.border = True
        table.hrules = prettytable.HEADER
        table.vrules = prettytable.NONE
        i = 0
        i_selected = i
        if probes_list != None:
            for probe in probes_list:
                table.add_row([
                    colorama.Fore.YELLOW + str(i),
                    colorama.Fore.WHITE + probe[&#34;Interface&#34;],
                    colorama.Fore.CYAN + probe[&#34;Id&#34;],
                    colorama.Fore.GREEN + probe[&#34;Description&#34;],
                    ])
                i += 1

        if i == 0:
            print(&#34;There is no any debug probe connected in system!&#34;)
            raise IOError(&#34;There is no any debug probe connected in system!&#34;)

        print(table)
        print(colorama.Style.RESET_ALL, end=&#39;&#39;)

        if i == 1:
            # Automatically gets and use only one option\
            i_selected = 0
        else:
            print(&#34;Please choose the debug probe: &#34;, end=&#39;&#39;)
            i_selected = int(input())
            if i_selected &gt; i-1:
                print(&#34;The choosen probe index is out of range&#34;)
                raise IOError(&#34;The choosen probe index is out of range&#34;)

        row = table[i_selected]
        row.border = False
        row.header = False
        debug_interface = row.get_string(fields=[&#34;Interface&#34;]).strip().replace(colorama.Fore.WHITE, &#34;&#34;).lower()
        hardware_id = row.get_string(fields=[&#34;Id&#34;]).strip().replace(colorama.Fore.CYAN, &#34;&#34;).lower()

        return debug_interface, hardware_id</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.list</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="spsdk.dat.debug_mailbox.DebugProbes.append_pemicro_probes"><code class="name flex">
<span>def <span class="ident">append_pemicro_probes</span></span>(<span>self, probes: list) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"><p>Add P&amp;E Micro-based probes.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def append_pemicro_probes(self, probes: list) -&gt; None:
    &#34;&#34;&#34;Add P&amp;E Micro-based probes.&#34;&#34;&#34;
    if probes != None:
        for probe in probes:
            self.append({&#34;Interface&#34;:&#34;PEMICRO&#34;, &#34;Id&#34;:probe[&#34;id&#34;], &#34;Description&#34;:probe[&#34;description&#34;]})</code></pre>
</details>
</dd>
<dt id="spsdk.dat.debug_mailbox.DebugProbes.append_pyocd_probes"><code class="name flex">
<span>def <span class="ident">append_pyocd_probes</span></span>(<span>self, probes: list) ‑> NoneType</span>
</code></dt>
<dd>
<div class="desc"><p>Add PyOCD-based probes.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def append_pyocd_probes(self, probes: list) -&gt; None:
    &#34;&#34;&#34;Add PyOCD-based probes.&#34;&#34;&#34;
    if probes != None:
        for probe in probes:
            self.append({&#34;Interface&#34;:&#34;PyOCD&#34;, &#34;Id&#34;:probe.unique_id, &#34;Description&#34;:probe.description})</code></pre>
</details>
</dd>
<dt id="spsdk.dat.debug_mailbox.DebugProbes.select_probe"><code class="name flex">
<span>def <span class="ident">select_probe</span></span>(<span>self, probes_list: list) ‑> Tuple[str, str]</span>
</code></dt>
<dd>
<div class="desc"><p>Perform Probe selection.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def select_probe(self, probes_list: list) -&gt; Tuple[str, str]:
    &#34;&#34;&#34;Perform Probe selection.&#34;&#34;&#34;
    colorama.init()

    # Print all PyOCD probes and then Pemicro with local index
    table = prettytable.PrettyTable([&#34;#&#34;, &#34;Interface&#34;, &#34;Id&#34;, &#34;Description&#34;])
    table.align = &#39;l&#39;
    table.header = True
    table.border = True
    table.hrules = prettytable.HEADER
    table.vrules = prettytable.NONE
    i = 0
    i_selected = i
    if probes_list != None:
        for probe in probes_list:
            table.add_row([
                colorama.Fore.YELLOW + str(i),
                colorama.Fore.WHITE + probe[&#34;Interface&#34;],
                colorama.Fore.CYAN + probe[&#34;Id&#34;],
                colorama.Fore.GREEN + probe[&#34;Description&#34;],
                ])
            i += 1

    if i == 0:
        print(&#34;There is no any debug probe connected in system!&#34;)
        raise IOError(&#34;There is no any debug probe connected in system!&#34;)

    print(table)
    print(colorama.Style.RESET_ALL, end=&#39;&#39;)

    if i == 1:
        # Automatically gets and use only one option\
        i_selected = 0
    else:
        print(&#34;Please choose the debug probe: &#34;, end=&#39;&#39;)
        i_selected = int(input())
        if i_selected &gt; i-1:
            print(&#34;The choosen probe index is out of range&#34;)
            raise IOError(&#34;The choosen probe index is out of range&#34;)

    row = table[i_selected]
    row.border = False
    row.header = False
    debug_interface = row.get_string(fields=[&#34;Interface&#34;]).strip().replace(colorama.Fore.WHITE, &#34;&#34;).lower()
    hardware_id = row.get_string(fields=[&#34;Id&#34;]).strip().replace(colorama.Fore.CYAN, &#34;&#34;).lower()

    return debug_interface, hardware_id</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="spsdk.dat.debug_mailbox.dmboxADIv5Discovery"><code class="flex name class">
<span>class <span class="ident">dmboxADIv5Discovery</span></span>
<span>(</span><span>target: Any)</span>
</code></dt>
<dd>
<div class="desc"><p>Custom discoverer class based of ADIv5Discovery.</p>
<p>! @brief Constructor.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class dmboxADIv5Discovery(ADIv5Discovery):
    &#34;&#34;&#34;Custom discoverer class based of ADIv5Discovery.&#34;&#34;&#34;
    def __init__(self, target: Any) -&gt; None:
        &#34;&#34;&#34;! @brief Constructor.&#34;&#34;&#34;
        super(dmboxADIv5Discovery, self).__init__(target)

    def discover(self) -&gt; CallSequence:
        &#34;&#34;&#34;Setup list of calls to perform the components discovery.&#34;&#34;&#34;
        #pylint: disable=bad-whitespace
        return CallSequence(
            (&#39;find_aps&#39;,            self._find_aps),
            (&#39;create_aps&#39;,          self._create_aps),
            (&#39;find_components&#39;,     self._find_components),
            (&#39;create_cores&#39;,            self._create_cores)
        )

    def _find_components(self) -&gt; None:
        return None

    def _create_cores(self) -&gt; None:
        return None</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>pyocd.coresight.discovery.ADIv5Discovery</li>
<li>pyocd.coresight.discovery.CoreSightDiscovery</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="spsdk.dat.debug_mailbox.dmboxADIv5Discovery.discover"><code class="name flex">
<span>def <span class="ident">discover</span></span>(<span>self) ‑> pyocd.utility.sequencer.CallSequence</span>
</code></dt>
<dd>
<div class="desc"><p>Setup list of calls to perform the components discovery.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def discover(self) -&gt; CallSequence:
    &#34;&#34;&#34;Setup list of calls to perform the components discovery.&#34;&#34;&#34;
    #pylint: disable=bad-whitespace
    return CallSequence(
        (&#39;find_aps&#39;,            self._find_aps),
        (&#39;create_aps&#39;,          self._create_aps),
        (&#39;find_components&#39;,     self._find_components),
        (&#39;create_cores&#39;,            self._create_cores)
    )</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="spsdk.dat.debug_mailbox.dmboxADIv6Discovery"><code class="flex name class">
<span>class <span class="ident">dmboxADIv6Discovery</span></span>
<span>(</span><span>target: Any)</span>
</code></dt>
<dd>
<div class="desc"><p>Custom discoverer class based of ADIv6Discovery.</p>
<p>! @brief Constructor.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class dmboxADIv6Discovery(ADIv6Discovery):
    &#34;&#34;&#34;Custom discoverer class based of ADIv6Discovery.&#34;&#34;&#34;

    def __init__(self, target: Any) -&gt; None:
        &#34;&#34;&#34;! @brief Constructor.&#34;&#34;&#34;
        super(dmboxADIv6Discovery, self).__init__(target)

    def discover(self) -&gt; CallSequence:
        &#34;&#34;&#34;Setup list of calls to perform the components discovery.&#34;&#34;&#34;
        return CallSequence(
            (&#39;find_root_components&#39;, self._find_root_components),
        )</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>pyocd.coresight.discovery.ADIv6Discovery</li>
<li>pyocd.coresight.discovery.CoreSightDiscovery</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="spsdk.dat.debug_mailbox.dmboxADIv6Discovery.discover"><code class="name flex">
<span>def <span class="ident">discover</span></span>(<span>self) ‑> pyocd.utility.sequencer.CallSequence</span>
</code></dt>
<dd>
<div class="desc"><p>Setup list of calls to perform the components discovery.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def discover(self) -&gt; CallSequence:
    &#34;&#34;&#34;Setup list of calls to perform the components discovery.&#34;&#34;&#34;
    return CallSequence(
        (&#39;find_root_components&#39;, self._find_root_components),
    )</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="spsdk.dat" href="index.html">spsdk.dat</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="spsdk.dat.debug_mailbox.DebugMailbox" href="#spsdk.dat.debug_mailbox.DebugMailbox">DebugMailbox</a></code></h4>
<ul class="">
<li><code><a title="spsdk.dat.debug_mailbox.DebugMailbox.close" href="#spsdk.dat.debug_mailbox.DebugMailbox.close">close</a></code></li>
<li><code><a title="spsdk.dat.debug_mailbox.DebugMailbox.get_dmbox_ap" href="#spsdk.dat.debug_mailbox.DebugMailbox.get_dmbox_ap">get_dmbox_ap</a></code></li>
<li><code><a title="spsdk.dat.debug_mailbox.DebugMailbox.spin_read" href="#spsdk.dat.debug_mailbox.DebugMailbox.spin_read">spin_read</a></code></li>
<li><code><a title="spsdk.dat.debug_mailbox.DebugMailbox.spin_write" href="#spsdk.dat.debug_mailbox.DebugMailbox.spin_write">spin_write</a></code></li>
<li><code><a title="spsdk.dat.debug_mailbox.DebugMailbox.will_init_target" href="#spsdk.dat.debug_mailbox.DebugMailbox.will_init_target">will_init_target</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="spsdk.dat.debug_mailbox.DebugMailboxError" href="#spsdk.dat.debug_mailbox.DebugMailboxError">DebugMailboxError</a></code></h4>
</li>
<li>
<h4><code><a title="spsdk.dat.debug_mailbox.DebugProbes" href="#spsdk.dat.debug_mailbox.DebugProbes">DebugProbes</a></code></h4>
<ul class="">
<li><code><a title="spsdk.dat.debug_mailbox.DebugProbes.append_pemicro_probes" href="#spsdk.dat.debug_mailbox.DebugProbes.append_pemicro_probes">append_pemicro_probes</a></code></li>
<li><code><a title="spsdk.dat.debug_mailbox.DebugProbes.append_pyocd_probes" href="#spsdk.dat.debug_mailbox.DebugProbes.append_pyocd_probes">append_pyocd_probes</a></code></li>
<li><code><a title="spsdk.dat.debug_mailbox.DebugProbes.select_probe" href="#spsdk.dat.debug_mailbox.DebugProbes.select_probe">select_probe</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="spsdk.dat.debug_mailbox.dmboxADIv5Discovery" href="#spsdk.dat.debug_mailbox.dmboxADIv5Discovery">dmboxADIv5Discovery</a></code></h4>
<ul class="">
<li><code><a title="spsdk.dat.debug_mailbox.dmboxADIv5Discovery.discover" href="#spsdk.dat.debug_mailbox.dmboxADIv5Discovery.discover">discover</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="spsdk.dat.debug_mailbox.dmboxADIv6Discovery" href="#spsdk.dat.debug_mailbox.dmboxADIv6Discovery">dmboxADIv6Discovery</a></code></h4>
<ul class="">
<li><code><a title="spsdk.dat.debug_mailbox.dmboxADIv6Discovery.discover" href="#spsdk.dat.debug_mailbox.dmboxADIv6Discovery.discover">discover</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>